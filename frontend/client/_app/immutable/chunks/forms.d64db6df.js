import{s as $,z as u,A as h,p as w,u as M,q as N,r as T}from"./scheduler.2790c315.js";import{S as k,i as D,c as F,b as H,m as S,t as A,a as L,d as j}from"./index.6fb2ffa8.js";import{I as q,g as v,a as z}from"./Icon.1a6649c9.js";import{p as C}from"./parse.bee59afc.js";import{c as I,a as O}from"./singletons.8444298e.js";function J(o){let e;const s=o[2].default,n=w(s,o,o[3],null);return{c(){n&&n.c()},l(t){n&&n.l(t)},m(t,a){n&&n.m(t,a),e=!0},p(t,a){n&&n.p&&(!e||a&8)&&M(n,s,t,t[3],e?T(s,t[3],a,null):N(t[3]),null)},i(t){e||(A(n,t),e=!0)},o(t){L(n,t),e=!1},d(t){n&&n.d(t)}}}function P(o){let e,s;const n=[{name:"loader-2"},o[1],{iconNode:o[0]}];let t={$$slots:{default:[J]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)t=u(t,n[a]);return e=new q({props:t}),{c(){F(e.$$.fragment)},l(a){H(e.$$.fragment,a)},m(a,r){S(e,a,r),s=!0},p(a,[r]){const c=r&3?v(n,[n[0],r&2&&z(a[1]),r&1&&{iconNode:a[0]}]):{};r&8&&(c.$$scope={dirty:r,ctx:a}),e.$set(c)},i(a){s||(A(e.$$.fragment,a),s=!0)},o(a){L(e.$$.fragment,a),s=!1},d(a){j(e,a)}}}function R(o,e,s){let{$$slots:n={},$$scope:t}=e;const a=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]];return o.$$set=r=>{s(1,e=u(u({},e),h(r))),"$$scope"in r&&s(3,t=r.$$scope)},e=h(e),[a,e,n,t]}class U extends k{constructor(e){super(),D(this,e,R,P,$,{})}}const x=U,B=I("invalidate_all");function G(o){return O.apply_action(o)}function K(o){const e=JSON.parse(o);return e.data&&(e.data=C(e.data)),e}function y(o){return HTMLElement.prototype.cloneNode.call(o)}function tt(o,e=()=>{}){const s=async({action:t,result:a,reset:r})=>{a.type==="success"&&(r!==!1&&HTMLFormElement.prototype.reset.call(o),await B()),(location.origin+location.pathname===t.origin+t.pathname||a.type==="redirect"||a.type==="error")&&G(a)};async function n(t){var d,_,b,g;if(((d=t.submitter)!=null&&d.hasAttribute("formmethod")?t.submitter.formMethod:y(o).method)!=="post")return;t.preventDefault();const r=new URL((_=t.submitter)!=null&&_.hasAttribute("formaction")?t.submitter.formAction:y(o).action),c=new FormData(o),m=(b=t.submitter)==null?void 0:b.getAttribute("name");m&&c.append(m,((g=t.submitter)==null?void 0:g.getAttribute("value"))??"");const f=new AbortController;let p=!1;const E=await e({action:r,cancel:()=>p=!0,controller:f,get data(){return c},formData:c,get form(){return o},formElement:o,submitter:t.submitter})??s;if(p)return;let l;try{const i=await fetch(r,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:c,signal:f.signal});l=K(await i.text()),l.type==="error"&&(l.status=i.status)}catch(i){if((i==null?void 0:i.name)==="AbortError")return;l={type:"error",error:i}}E({action:r,get data(){return c},formData:c,get form(){return o},formElement:o,update:i=>s({action:r,result:l,reset:i==null?void 0:i.reset}),result:l})}return HTMLFormElement.prototype.addEventListener.call(o,"submit",n),{destroy(){HTMLFormElement.prototype.removeEventListener.call(o,"submit",n)}}}export{x as L,tt as e};
